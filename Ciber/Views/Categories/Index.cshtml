@model IEnumerable<Ciber.Model.Category>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<div class="row">
    <div class="col-md-12">
        <h3 class="title-5 m-b-35">Quản lý: Danh mục sản phẩm</h3>
        <div class="table-data__tool">
            <div class="table-data__tool-right">
                <a href="/Admin/categories/create" class="au-btn au-btn-icon au-btn--green au-btn--small">
                    <i class="zmdi zmdi-plus"></i>Thêm danh mục
                </a>
            </div>
        </div>
        <div class="table-responsive table-responsive-data2">
            <table class="table table-data2">
                <thead>
                    <tr>
                        <th class="text-center">Id</th>
                        <th class="text-center">Tên danh mục</th>
                        <th class="text-center">Mô tả</th>
                        <th class="text-center">Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="tr-shadow">
                            <td class="text-center">@item.Id</td>
                            <td class="text-center">@item.Name</td>
                            <td class="text-center">@item.Description</td>
                            <td class="text-center">
                                <div class="table-data-feature">
                                    <span class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                        <a href="/Categories/Update/@item.Id"><i class="zmdi zmdi-edit"></i></a>
                                    </span>
                                    <span class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                        <a onclick="Delete(@item.Id)"><i class="zmdi zmdi-delete"></i></a>
                                    </span>
                                </div>
                            </td>
                        </tr>
                        <tr class="spacer"></tr>
                    }
                </tbody>
            </table>
        </div>
        Số bản ghi : @Model.Count()
    </div>
</div>
<script>
    function Delete(Id) {
        var data = {
            Id: Id,
        };
        var title = "Bạn có đồng ý xóa dữ liệu này không?";
        var url = '/Categories/Delete/';
        swal({
            title: title,
            icon: "warning",
            buttons: {
                ok: "Xác nhận",
                cancel: "Hủy",
            }
        }).then((isConfirm) => {
            if (isConfirm != 'ok') {

            } else {
                $.post(url, data,
                    function (rs) {
                        if (rs.status > 0) {
                            swal({
                                title: "Xóa thành công!",
                                text: "Dữ liệu của bạn đã được cập nhật!",
                                icon: "success",
                            }).then(function (isConfirm) {
                                window.location.href = '/Categories';
                            });
                        }
                        else {
                            toastr.error(rs.message);
                        }
                    });
            }
        });
    }
</script>